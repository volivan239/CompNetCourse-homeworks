# Практика 7. Транспортный уровень

## Wireshark: Перехват TCP-передачи данных

См. ответы [здесь](WiresharkTCP.md).

## Wireshark: Работа с Time-Sequence-Graph (Stevens)

См. ответы [здесь](WiresharkTime-Sequence-Graph.md).

## Echo-server & client

### Сервер

Запуск сервера осуществляется командой
```
.\gradlew echo-server:run
```

В конфигурационном файле (`resources/config.json`) можно указать порт, который сервер будет слушать (по умолчанию -- 3456), имитируемую частоту потери пакетов и максимальный размер принимаемого echo-сообщения.

### Клиент

Клиент запускается командой

```
.\gradlew echo-client:run --args="<host> <port>"
```

Здесь `<host>` и `<port>` обозначают адрес и порт сервера, соответственно. Клиент выведет результаты пинг-запросов в формате, близкому к формату стандартной утилиты. При этом для удобства локального тестирования RTT указывается в микросекундах.

### Пример запущенных сервера и клиента:

![image_2023-04-13_02-54-52](https://user-images.githubusercontent.com/65076429/231614959-a98078ca-cc1e-4bdb-bf0d-d4d542c1ff7b.png)

## Heartbeat-server & client

### Сервер

Запуск сервера осуществляется командой
```
.\gradlew heartbeat-server:run
```

В конфигурационном файле (`resources/config.json`) можно указать порт, который сервер будет слушать (по умолчанию -- 3456), и таймаут (в миллисекундах, дефолтное значение -- 3000), по истечении которого клиент признается остановленным. Запущенный сервер выводит информацию о всех пакетах, получаемых от клиентов, а также о всех отключающихся клиентах.


### Клиент

Клиент запускается точно также, как и в предыдущем задании, только вместо `echo-client:run` следует указывать `heartbeat-client:run`, формат аргументов командной строки тот же. Клиент ничего не выводит в консоль, но запускается на случайном порте и раз в секунду отправляет пакет на сервер.


### Пример запущенных сервера и клиента

Порядок событий на скриншоте:
1. Подключение первого клиента (с портом 4547)
2. Подключение второго клиента (с портом 4798)
3. Отключение второго клиента
4. Отключение первого клиента

![image_2023-04-13_03-09-52](https://user-images.githubusercontent.com/65076429/231616053-420ea1be-8384-44b3-904c-a5c982b9b814.png)
