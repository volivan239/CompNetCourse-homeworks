# ДЗ 5. Прикладной уровень

## 1. Почта и SMTP

Это задание находится в папке `smtp-client`. Запустить клиент можно следующей командой:

```
./gradlew smtp-client:run --args='<your args>'
```

### Аргументы командной строки

Аргументы задаются в следующем порядке и формате:
1. Почта, на которую следует отправить письмо
2. Тема письма
3. Файлы, определяющие содержание письма. При этом первый файл (обычно имеющий формат `txt` или `html`) будет составлять тело письма, а все последующие файлы — вложения.

Пример запуска клиента (обратите, что перед запуском важно также настроить параметры в конфигурационном файле, в особенности "username" и "password"):

```
./gradlew smtp-client:run --args='example@gmail.com "Test message" data/hello.html data/wolf.png'
```

Все остальные данные указываются в [конфигурационном файле](smtp-client/src/main/resources/config.json).
В нем можно задать следующие параметры:
* `client` — может принимать одно из двух значений: "Raw" и "LibraryBased". В первом случае для отправки почты будет использован код, написанный самостоятельно на TCP-сокетах, во втором случае письмо будет отправляться с помощью библиотеки JavaMail
* `host` — домен SMTP-сервера. Приложение тестировалось только для Gmail-сервера `smtp.gmail.com`, если нужен другой сервер, то рекомендуется использовать "LibraryBased" клиент
* `port` — порт SMTP-сервера
* `auth` — необходима ли авторизация (поддерживается только "LibraryBased"-клиентом, в "Raw" всегда идет авторизация)
* `tls` — использовать ли шифрование при подключении к серверу (также поддерживается только "LibraryBased"-клиентом, "Raw" всегда использует шифрование)
* `username` — адрес почты, с которого будут отправляться сообщения
* `password` — пароль от этого адреса почты (используется только в случае если в `auth` выставлено `true`). В случае если используется Gmail необходимо использовать специальный [пароль приложения](https://support.google.com/accounts/answer/185833?hl=ru)
* `debug` — выводить ли в стандартный поток отладочную информацию (включая содержание отправляемых пакетов)

Команда из примера отправляет следующее письмо:
![Screenshot 2023-03-31 at 20 15 38](https://user-images.githubusercontent.com/65076429/229186822-0969c564-09cc-457a-b7cf-768b3bf26440.png)

## 2. Удаленный запуск команд

### Сервер

Сервер запускается командой
```
./gradlew remote-control-server:run
```

Порт, на котором будет запущен сервер, можно задать в [конфигурационном файле](remote-control-server/src/main/resources/config.json). В этом же файле параметром `cmdtime` можно задать максимальное время на выполнение одной команды.

### Клиент

Клиент запускается командой
```
/gradlew remote-control-client:run --args='<host> <port> <cmd>'
```
Где `host` и `port` задают адрес и порт сервера, соответственно, а `cmd` — команда, переданная на выполнение. В результате такого запуска клиент выведет результат запуска команды на сервере. Например, для команды `./gradlew remote-control-client:run --args='127.0.0.1 8080 "ping -c 10 yandex.ru"'` при локальном запуске (и поднятом локально сервере) я получил такой ответ:
![Screenshot 2023-03-31 at 20 23 00](https://user-images.githubusercontent.com/65076429/229188163-68ed3f22-bd38-4b1a-a08f-896a9c9a237d.png)

## Широковещательная рассылка через UDP.
### Сервер
Запустить сервер можно с помощью команды
```
./gradlew udp-broadcast-server:run
```
Также, в [конфигурационном файле](udp-broadcast-server/src/main/resources/config.json) необходимо указать [широковещательный адрес](https://en.wikipedia.org/wiki/Broadcast_address), а также можно настроить порт для вещания.

### Клиент
Клиент запускается командой
```
./gradlew udp-broadcast-client:run --args='<port>'
```
Где `port` — порт, на который ведется вещание (по умолчанию — 3000).
