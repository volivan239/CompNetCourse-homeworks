# Wireshark. Работа с DNS

## А. Утилита nslookup

* nslookup для получения IP-адреса сервера в Азии (для сервера `sina.com.cn` получен IP `36.51.254.91`):
![Screenshot 2023-03-22 at 00 48 52](https://user-images.githubusercontent.com/65076429/226749073-e954838e-c968-427d-bdfd-3493aac7bb2a.png)

* Определение авторитетных DNS-серверов для университета в Европе: для Кэмбриджского университета получены DNS-сервера `lex.ns.cloudflare.com` и `nucum.ns.cloudflare.com`,
ниже на скриншоте обращение к одному из этих серверов, на котором можно увидеть, что надпись "Non-authoritative answer" теперь отсутствует:
![image](https://user-images.githubusercontent.com/65076429/226750592-1140859e-4ba2-4283-a968-38702d6962ca.png)

* Веб-сервер, имеющий несколько IP-адресов уже найден -- `cambridge.org` имеет IP-адреса `104.16.56.52` и `104.16.55.52`. Веб-сервер СПбГУ имеет один IP-адрес:  
![Screenshot 2023-03-22 at 00 59 13](https://user-images.githubusercontent.com/65076429/226751090-6641b82f-476b-4cbe-a628-939cb3748773.png)

## Б. DNS-трассировка www.ietf.org

* На скриншоте DNS-запрос и ответ на него имеют номера 139 и 151, соответственно. Синим внизу выделена строчка, из которой видно, что они были отправлены с помощью протокола UDP.
![Screenshot 2023-03-22 at 01 29 48](https://user-images.githubusercontent.com/65076429/226756288-561a134b-f4b8-4d43-b70f-46558c0ae23e.png)
* Порт назначения написан после `Dst Port:` в выделенной строке -- 53.
* Запрос отправлен на адрес `192.168.1.1`. Этот адрес совпадает с адресом DNS-сервера, полученным через ipconfig.
* В запросе, как это видно на скриншоте, запрашивается запись типа "А" (что бы это ни значило). Никаких "ответов" в запросе я не вижу.
* В ответном сообщении (см. скриншот ниже) 3 ответа. Первый содержит "Canonical name", т.е. некоторое "выделенное" имя для этого сервера (из множества имен, ссылающихся на один сервер).
Следующие два содержат по IP-адресу сервера. Также в каждом ответе есть поля TTL, Data length и другие.
![Screenshot 2023-03-22 at 01 41 55](https://user-images.githubusercontent.com/65076429/226757989-7e295b22-7e2f-40de-82c8-543833691f8b.png)
* Буквально сразу за DNS-запросами идут два вот этих запроса. И действительно, IP-адрес назначения пакета `104.16.45.99` совпадает с первым из IP-адресов, выданных в ответ на DNS-запрос
![Screenshot 2023-03-22 at 01 52 31](https://user-images.githubusercontent.com/65076429/226759533-d85bdf65-2612-44fb-8cab-13b0661d5816.png)
* Дальше запросов DNS я не вижу (видимо, все изображения хранятся на том же сервере, и бразуер или DNS-кэш избегают лишних запросов)
