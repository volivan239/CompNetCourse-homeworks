# Перехват TCP-передачи данных от вашего компьютера удаленному серверу

1. По скриншоту ниже можно понять, что для передачи файлов по TCP мой компьютер использует адрес `192.168.1.147` (см. первую строку в списке пакетов) и порт `56887` (см. выделенную строку в окне деталей пакета)
![image_2023-04-12_01-51-30](https://user-images.githubusercontent.com/65076429/231305516-b964294e-dc25-4cf4-bbfe-57c9fe599da7.png)

2. Аналогично, мы видим что адрес сервера -- `128.119.245.12`, а его порт для приема -- `80` (порт для отправки найден в предыдущем задании).

3. Как видно на скриншоте ниже, SYN-сегмент имеет порядковый номер (Sequence number), равный 0. То, что это SYN-сегмент, определяется соответствующим битом в 
`Flags`, установленным в единицу (см. самый низ скриншота).

![image_2023-04-12_02-18-08](https://user-images.githubusercontent.com/65076429/231309026-9b827e5b-d5a9-48cc-a397-1ad080e2cc92.png)

4. Ответный SYNACK находится чуть ниже (номер 36 в списке захваченных пакетов), по аналогии с предыдущим заданием можем увидеть в нем, что порядковый номер равен 0, и то что это SYNACK-сегмент определяется соответствующими флагами.
В поле подтверждения находится число 2948541232 (заметим, что дальше мы всегда будем использовать относительную нумерацию). Сервер вычислил это значение как некоторую хеш-функцию от полученного SYN-пакета.

5. TCP-сегмент с командой POST -- на скриншоте ниже (в окне с байтовым представлением справа можно увидеть подпоследовательность POST), номер сегмента, как видим, равен 1.
![image_2023-04-12_02-33-20](https://user-images.githubusercontent.com/65076429/231310819-9c344df8-562d-44c6-b467-e7525e508713.png)

6. Все интересующие нас сегменты -- на скриншоте ниже. Выпишем их в формате (номер пакета в вайршарке, порядковый номер сегмента, время отправки) --- (номер ответного ack-пакета в вайршарке, номер ACK-а в ответе, время получения ACK-сегмента), RTT (все времена указаны в секундах):

* (49, 1, 2.976) --- (61, 640, 3.094), RTT=0.118
* (50, 640, 2.978) --- (63, 2088, 3.096), RTT=0.118
* (51, 2088, 2.978) --- (66, 3536, 3.097), RTT=0.119
* (62, 3536, 3.094) --- (69, 4984, 3.213), RTT=0.119
* (64, 4984, 3.096) --- (72, 6432, 3.215), RTT=0.119
* (65, 6432, 3.096) --- (73, 7880, 3.215), RTT=0.119

На этой последовательности можно убедиться, что номер ACK-а равен номеру следующего отправляемого сегмента, и что TCP сначала отправляет несколько сегментов сразу, а следующие отправляет по мере того как он получил ACK-и на предыдущие.

![image_2023-04-12_02-48-16](https://user-images.githubusercontent.com/65076429/231312460-38341307-d8b4-4443-a65e-d56647bb3e1d.png)

7. Основываясь лишь на предыдущих 6ти сегментах оценить пропускную способность сложно (т.к. они не позволяют оценить средний размер окна во время TCP-передачи). Поэтому измерим общее время на передачу POST-запроса.
Первый сегмент был отправлен во время 2.976. Последний ACK с номером 152961 пришел во время 3.693. Т.е. общий размер переданных данных составил примерно 149 КБ, и на передачу ушло 0.717 секунд.
Таким образом, пропускную способность можно оценить как примерно 212 КБайт/с
